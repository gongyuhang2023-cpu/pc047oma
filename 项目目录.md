# PC047 vCagAepitope 项目目录

> 自动生成于 2026-01-21 23:15

## 项目概述

**研究问题**: *H. pylori* CagA 蛋白如何重塑 Apc 突变小鼠的肠道微生物组？感染清除后，CagA 特异性 CD8+ T 细胞持续激活的驱动因素是什么？

**核心比较**: ApcMUT_HpWT (n=5, CagA+) vs ApcMUT_HpKO (n=4, Control)

**主要发现**:
- Beta 多样性 P=0.012 (群落结构重塑)
- 噬菌体多样性 P=0.032 (细菌-噬菌体协同变化)
- 功能冗余：通路无显著差异，但执行者从益生菌→致病菌静默更替

---

## 核心文档索引

| 文档 | 路径 | 用途 |
|------|------|------|
| **分析总结报告** | `analyses/00_analysis_summary_report.md` | 所有分析结果的综合报告（论文级别） |
| **简要报告** | `analyses/PC047_analysis_brief_report.md` | 快速了解假设和核心发现 |
| **后续分析计划** | `analyses/TODO_future_analyses.md` | 待执行和需要资源的分析清单 |
| **项目背景** | `analyses/pc047 Research background.pdf` | 实验设计和研究背景 |

---

## 分析文件 (analyses/)

### 主要分析 (.qmd)

| 文件 | 内容概述 | 关键输出 |
|------|----------|----------|
| `01_alpha_beta_diversity_analysis.qmd` | Kraken2/Bracken 物种多样性分析 | Alpha/Beta 多样性、DAA (ANCOM-BC/ALDEx2)、2×3 因子分析、病毒组分析 |
| `02_functional_profiling.qmd` | HUMAnN4 功能分析 | 通路丰度、分层功能分析、Driver 物种识别、FRI 计算 |
| `02b_extended_functional_analysis.qmd` | GO/PFAM 扩展功能分析 | Gene Families DAA、GO/PFAM 层面差异 |
| `03_singlem_diversity_analysis.qmd` | SingleM/Lyrebird 噬菌体分析 | 噬菌体多样性、Mantel/Procrustes 关联 |
| `03b_virome_function_integration.qmd` | 病毒组-功能整合分析 | 病毒-功能关联网络 |
| `03c_cooccurrence_network_analysis.qmd` | 共现网络分析 | 物种共现网络、跨域网络 |

### 学习笔记 (analyses/learning_notes/)

每个主要分析对应一份学习笔记，记录分析方法、代码解释和学习要点：
- `01_alpha_beta_diversity_learning_notes.md`
- `02_functional_profiling_learning_notes.md`
- `02b_extended_functional_analysis_learning_notes.md`
- `03_singlem_diversity_learning_notes.md`
- `03b_virome_function_integration_learning_notes.md`
- `03c_cooccurrence_network_learning_notes.md`

### 错误日志 (analyses/error-logs/)

- `01_alpha_beta_diversity_analysis-errors.md` - 分析过程中遇到的错误和解决方案

---

## 数据文件 (analyses/data/)

### 原始数据 (00-raw/) [git-ignored, 太大]

| 文件夹 | 来源工具 | 内容 |
|--------|----------|------|
| `d00-resource/` | - | 共享资源文件 |
| `d01_alpha_beta_diversity_analysis/bracken_standard/` | Kraken2+Bracken | 细菌/古菌物种丰度 |
| `d01_alpha_beta_diversity_analysis/bracken_virus/` | Kraken2+Bracken | 病毒物种丰度 |
| `d01_alpha_beta_diversity_analysis/kraken_archaea/` | Kraken2 | 古菌分类结果 |
| `d02_functional_profiling/humann4/` | HUMAnN4 | 通路、Gene Families、GO、PFAM |
| `d03_singlem_diversity_analysis/pc047-rst_singleM/` | SingleM | 细菌 marker gene 结果 |
| `d03_singlem_diversity_analysis/pc047-rst_lyrebird/` | Lyrebird | 噬菌体分类结果 |
| `d03b_virome_function_integration/` | - | 病毒组整合数据 |

### 元数据

- `metadata/pc047-metadata.xlsx` - 样本元数据（分组、基因型、感染状态等）

### 分析输出 (git-ignored, 可重新生成)

| 文件夹 | 对应分析 | 主要内容 |
|--------|----------|----------|
| `01_alpha_beta_diversity_analysis/` | 01 | PNG 图片、CSV 统计表、RDS 对象 |
| `02_functional_profiling/` | 02 | 功能分析图表和数据 |
| `02b_extended_functional/` | 02b | GO/PFAM MaAsLin2 结果 |
| `03_singlem_diversity_analysis/` | 03 | 噬菌体分析结果 |
| `03b_virome_function_integration/` | 03b | 病毒-功能整合结果 |
| `03c_cooccurrence_network/` | 03c | 网络分析结果 |

### 关键 RDS 对象

| 对象 | 路径 | 内容 |
|------|------|------|
| 物种 TSE | `data/01_.../tse_standard_species_ca_cleaned.rds` | 清洗后的物种 TreeSummarizedExperiment |
| 功能 TSE | `data/02_.../tse_humann_pathway_ca.rds` | HUMAnN4 通路 TSE |
| 物种-KO 关联 | `data/02_.../21_taxa_ko_associations.csv` | 78 对显著关联 |
| Driver 分析 | `data/02_.../92_part9_driver_species_tests.csv` | Driver 物种更替证据 |

---

## 参考资料

### OMA BOOK (analyses/OMA BOOK/)

Orchestrating Microbiome Analysis 教程（共 27 章 + Overview），涵盖：
- Chapter 1-5: 数据结构、导入、质控
- Chapter 6-9: 多样性分析
- Chapter 10-15: 差异丰度分析 (ANCOM-BC, ALDEx2, MaAsLin)
- Chapter 16-20: 高级分析（网络、整合）
- Chapter 21+: 专题分析

### Protocol (analyses/Protocol/)

| 协议 | 用途 |
|------|------|
| `Metagenome analysis using the Kraken softwaresuite.pdf` | Kraken2/Bracken 使用指南 |
| `HUMAnN4_Analysis_Protocol.pdf` | HUMAnN4 功能注释协议 |
| `singlem_and_lyrebird_analyses_protocal.pdf` | SingleM/Lyrebird 噬菌体分析协议 |
| `elife-65088-v1.pdf` | 参考文献（方法学） |

### 参考文献 (analyses/references/)

| 文件 | 内容 |
|------|------|
| `literature_summary_for_notebooklm.md` | 文献摘要（用于 NotebookLM） |
| `papers_to_download.md` | 待下载论文列表 |
| `*.pdf` | 已下载的参考文献 |

---

## PPT 生成 (PPT/)

| 文件 | 版本 | 说明 |
|------|------|------|
| `generate_ppt_v6.py` | 最新 | PPT 生成脚本 |
| `20260126/` | v6 | 最新组会 PPT（中/英文版本） |

历史版本：`generate_ppt.py` → `v2` → `v3` → `v4` → `v6`

---

## Claude 配置

### 自定义命令 (.claude/commands/)

| 命令 | 用途 |
|------|------|
| `/data-check` | 检查数据状态 |
| `/interpret` | 解释分析结果 |
| `/new-analysis` | 创建新分析 |
| `/oma-ref` | 查询 OMA BOOK 参考 |
| `/render` | 渲染 Quarto 分析 |
| `/summarize` | 总结分析结果 |

### NotebookLM 集成

- **OMA & Protocol Reference**: `pc047-oma-protocols-reference`
- **Literature Reference**: `c14f7f4b-2edd-4bce-a287-b3e531b2f855`

---

## 常用路径速查

```r
# 加载清洗后的物种数据
tse <- readRDS(here::here("data/01_alpha_beta_diversity_analysis/tse_standard_species_ca_cleaned.rds"))

# 加载功能数据
tse_pathway <- readRDS(here::here("data/02_functional_profiling/tse_humann_pathway_ca.rds"))

# 元数据
metadata <- readxl::read_excel(here::here("data/metadata/pc047-metadata.xlsx"))
```

---

## 更新日志

| 日期 | 更新内容 |
|------|----------|
| 2026-01-21 | 创建详细项目目录 |
| 2026-01-21 | 添加 PPT v6，更新 gitignore |
| 2026-01-20 | 添加 02b GO/PFAM 分析、03c 网络分析 |
| 2026-01-19 | 添加扩展分析框架：FRI、GO/PFAM、共现网络 |
| 2026-01-18 | 添加 Part 4b/5b 病毒分析，生成 PPT v3 |
