# PC047 vCagAepitope 项目目录

> 自动生成于 2026-01-21 23:30

---

## 1. 项目概述

**研究问题**: *H. pylori* CagA 蛋白如何重塑 Apc 突变小鼠的肠道微生物组？

**核心比较**: ApcMUT_HpWT (n=5, CagA+) vs ApcMUT_HpKO (n=4, Control)

**主要发现**:
| 指标 | P值 | 含义 |
|------|-----|------|
| Species Beta 多样性 | 0.012 | 群落结构重塑 |
| 噬菌体多样性 | 0.032 | 细菌-噬菌体协同变化 |
| 通路 DAA | >0.05 | 功能冗余（执行者静默更替） |

---

## 2. 核心文档

| 文档 | 完整路径 | 用途 |
|------|----------|------|
| 分析总结报告 | `analyses/00_analysis_summary_report.md` | 所有分析结果的综合报告（论文级别） |
| 简要报告 | `analyses/PC047_analysis_brief_report.md` | 快速了解假设和核心发现 |
| 后续分析计划 | `analyses/TODO_future_analyses.md` | 待执行分析清单 |
| 项目背景 PDF | `analyses/pc047 Research background.pdf` | 实验设计和研究背景 |
| 元数据 | `analyses/data/metadata/pc047-metadata.xlsx` | 样本分组信息 |

---

## 3. 分析文件 (.qmd)

### 3.1 主要分析

| 编号 | 文件路径 | 内容 | 数据来源 |
|------|----------|------|----------|
| 01 | `analyses/01_alpha_beta_diversity_analysis.qmd` | 物种多样性分析 | Kraken2/Bracken |
| 02 | `analyses/02_functional_profiling.qmd` | 功能分析 | HUMAnN4 |
| 02b | `analyses/02b_extended_functional_analysis.qmd` | GO/PFAM 扩展分析 | HUMAnN4 |
| 03 | `analyses/03_singlem_diversity_analysis.qmd` | 噬菌体分析 | SingleM/Lyrebird |
| 03b | `analyses/03b_virome_function_integration.qmd` | 病毒组-功能整合 | 整合数据 |
| 03c | `analyses/03c_cooccurrence_network_analysis.qmd` | 共现网络分析 | 整合数据 |

### 3.2 学习笔记

每个分析对应一份笔记，路径格式：`analyses/learning_notes/{分析名}_learning_notes.md`

| 笔记路径 |
|----------|
| `analyses/learning_notes/01_alpha_beta_diversity_learning_notes.md` |
| `analyses/learning_notes/02_functional_profiling_learning_notes.md` |
| `analyses/learning_notes/02b_extended_functional_analysis_learning_notes.md` |
| `analyses/learning_notes/03_singlem_diversity_learning_notes.md` |
| `analyses/learning_notes/03b_virome_function_integration_learning_notes.md` |
| `analyses/learning_notes/03c_cooccurrence_network_learning_notes.md` |

### 3.3 错误日志

| 路径 |
|------|
| `analyses/error-logs/01_alpha_beta_diversity_analysis-errors.md` |

---

## 4. 原始数据 (analyses/data/00-raw/)

> **注意**: 此目录 git-ignored，文件太大不上传

### 4.1 Kraken2/Bracken 物种分类

| 数据类型 | 完整路径 | 文件格式 |
|----------|----------|----------|
| 细菌/古菌 Species | `analyses/data/00-raw/d01_alpha_beta_diversity_analysis/bracken_standard/` | `ca{XX}_brackenstd_S.tsv` |
| 细菌/古菌 Genus | `analyses/data/00-raw/d01_alpha_beta_diversity_analysis/bracken_standard/` | `ca{XX}_brackenstd_G.tsv` |
| 病毒 | `analyses/data/00-raw/d01_alpha_beta_diversity_analysis/bracken_virus/` | `ca{XX}_brackenvirus_S.tsv` |
| 古菌 Kraken | `analyses/data/00-raw/d01_alpha_beta_diversity_analysis/kraken_archaea/` | `ca{XX}_krakenarchaea_report.txt` |

### 4.2 HUMAnN4 功能注释

| 数据类型 | 完整路径 |
|----------|----------|
| Gene Families (原始) | `analyses/data/00-raw/d02_functional_profiling/humann4/humann4_genefamilies-step1-merged.tsv` |
| Gene Families (标准化) | `analyses/data/00-raw/d02_functional_profiling/humann4/humann4_genefamilies-step2-normalized.tsv` |
| KO (unstratified) | `analyses/data/00-raw/d02_functional_profiling/humann4/humann4_genefamilies-step3-KO_unstratified.tsv` |
| KO (stratified) | `analyses/data/00-raw/d02_functional_profiling/humann4/humann4_genefamilies-step3-KO_stratified.tsv` |
| GO (unstratified) | `analyses/data/00-raw/d02_functional_profiling/humann4/humann4_genefamilies-step3-GO_unstratified.tsv` |
| GO (stratified) | `analyses/data/00-raw/d02_functional_profiling/humann4/humann4_genefamilies-step3-GO_stratified.tsv` |
| PFAM (unstratified) | `analyses/data/00-raw/d02_functional_profiling/humann4/humann4_genefamilies-step3-PFAM_unstratified.tsv` |
| PFAM (stratified) | `analyses/data/00-raw/d02_functional_profiling/humann4/humann4_genefamilies-step3-PFAM_stratified.tsv` |
| EggNOG | `analyses/data/00-raw/d02_functional_profiling/humann4/humann4_genefamilies-step3-EggNOG_unstratified.tsv` |

### 4.3 SingleM/Lyrebird 噬菌体分析

| 数据类型 | 完整路径 |
|----------|----------|
| SingleM 细菌 marker | `analyses/data/00-raw/d03_singlem_diversity_analysis/pc047-rst_singleM/` |
| Lyrebird 噬菌体 | `analyses/data/00-raw/d03_singlem_diversity_analysis/pc047-rst_lyrebird/` |

---

## 5. 分析输出数据

> **注意**: 此目录 git-ignored，可通过运行 .qmd 重新生成

### 5.1 物种分析输出 (analyses/data/01_alpha_beta_diversity_analysis/)

**核心 RDS 对象**:
| 对象 | 完整路径 | 内容 |
|------|----------|------|
| 物种 TSE (清洗后) | `analyses/data/01_alpha_beta_diversity_analysis/tse_standard_species_ca_cleaned.rds` | 核心比较用 |
| 属 TSE (清洗后) | `analyses/data/01_alpha_beta_diversity_analysis/tse_standard_genus_ca_cleaned.rds` | 属水平分析 |
| 物种 TSE (全因子) | `analyses/data/01_alpha_beta_diversity_analysis/tse_standard_species_full_factored.rds` | 2×3 因子分析用 |
| Part5 汇总 | `analyses/data/01_alpha_beta_diversity_analysis/55_part5_summary_results.rds` | 9 组两两比较结果 |
| 病毒 PERMANOVA | `analyses/data/01_alpha_beta_diversity_analysis/61_part4b_virus_permanova_results.rds` | 病毒组分析结果 |

**输出图片**: `analyses/data/01_alpha_beta_diversity_analysis/*.png` (编号 01-40+)

### 5.2 功能分析输出 (analyses/data/02_functional_profiling/)

**核心 RDS 对象**:
| 对象 | 完整路径 | 内容 |
|------|----------|------|
| 通路 TSE (核心比较) | `analyses/data/02_functional_profiling/tse_humann_pathway_ca.rds` | 核心比较用 |
| 通路 TSE (全样本) | `analyses/data/02_functional_profiling/tse_pathway_full_27samples.rds` | 27 样本全集 |
| KO TSE | `analyses/data/02_functional_profiling/tse_humann_ko.rds` | KO 层面分析 |
| Driver 分析 | `analyses/data/02_functional_profiling/93_part9_stratified_analysis_results.rds` | Driver 物种识别 |

**关键 CSV 文件**:
| 文件 | 完整路径 | 内容 |
|------|----------|------|
| 物种-KO 关联 | `analyses/data/02_functional_profiling/21_taxa_ko_associations.csv` | 78 对显著关联 |
| Driver 物种 | `analyses/data/02_functional_profiling/26_key_ko_driver_species.csv` | 关键 KO 的执行者 |
| PERMANOVA | `analyses/data/02_functional_profiling/04_permanova_bray_humann_pathway.csv` | 通路 Beta 多样性 |
| MaAsLin2 结果 | `analyses/data/02_functional_profiling/05_daa_maaslin2_humann_pathway_full.csv` | 通路差异丰度 |

### 5.3 扩展功能分析 (analyses/data/02b_extended_functional/)

| 文件 | 完整路径 |
|------|----------|
| GO DAA 结果 | `analyses/data/02b_extended_functional/01_go_daa_results.csv` |
| PFAM DAA 结果 | `analyses/data/02b_extended_functional/02_pfam_daa_results.csv` |
| Gene Families DAA | `analyses/data/02b_extended_functional/03_genefamilies_daa_results.csv` |
| MaAsLin2 GO 详细 | `analyses/data/02b_extended_functional/maaslin2_go_results/` |
| MaAsLin2 PFAM 详细 | `analyses/data/02b_extended_functional/maaslin2_pfam_results/` |

### 5.4 噬菌体分析输出 (analyses/data/03_singlem_diversity_analysis/)

**核心 RDS 对象**:
| 对象 | 完整路径 | 内容 |
|------|----------|------|
| Lyrebird TSE (核心) | `analyses/data/03_singlem_diversity_analysis/tse_lyrebird_ca_cleaned.rds` | 噬菌体核心比较 |
| SingleM TSE (核心) | `analyses/data/03_singlem_diversity_analysis/tse_singlem_ca_cleaned.rds` | 细菌 marker 核心比较 |
| 扩展分析汇总 | `analyses/data/03_singlem_diversity_analysis/36_extended_analysis_summary.rds` | Mantel/Procrustes 结果 |

### 5.5 病毒-功能整合 (analyses/data/03b_virome_function_integration/)

| 文件 | 完整路径 |
|------|----------|
| 噬菌体-KO 相关性 | `analyses/data/03b_virome_function_integration/01_phage_ko_correlation_all.csv` |
| 显著相关性 | `analyses/data/03b_virome_function_integration/02_phage_ko_correlation_significant.csv` |
| 三方网络边 | `analyses/data/03b_virome_function_integration/05_tripartite_network_edges.csv` |

### 5.6 共现网络 (analyses/data/03c_cooccurrence_network/)

| 文件 | 完整路径 |
|------|----------|
| 网络统计 | `analyses/data/03c_cooccurrence_network/01_bacteria_network_stats.csv` |
| Hub 物种 | `analyses/data/03c_cooccurrence_network/02_bacteria_hub_species.csv` |

---

## 6. 参考资料

### 6.1 OMA BOOK (analyses/OMA BOOK/)

Orchestrating Microbiome Analysis 教程，完整路径：`analyses/OMA BOOK/OMA CHAPTER {N}.docx`

| 章节 | 主题 |
|------|------|
| Overview | 总览 |
| 1-5 | 数据结构、导入、质控 |
| 6-9 | 多样性分析 (Alpha, Beta, PERMANOVA) |
| 10-15 | 差异丰度分析 (ANCOM-BC, ALDEx2, MaAsLin2) |
| 16-20 | 高级分析（网络、整合、机器学习） |
| 21-27 | 专题分析 |
| 28-31 | 附录 |

### 6.2 分析协议 (analyses/Protocol/)

| 协议 | 完整路径 | 用途 |
|------|----------|------|
| Kraken 指南 | `analyses/Protocol/Metagenome analysis using the Kraken softwaresuite.pdf` | Kraken2/Bracken |
| HUMAnN4 协议 | `analyses/Protocol/HUMAnN4_Analysis_Protocol.pdf` | 功能注释 |
| SingleM 协议 | `analyses/Protocol/singlem_and_lyrebird_analyses_protocal.pdf` | 噬菌体分析 |
| eLife 文献 | `analyses/Protocol/elife-65088-v1.pdf` | 方法学参考 |

### 6.3 参考文献 (analyses/references/)

| 文件 | 完整路径 |
|------|----------|
| 文献摘要 | `analyses/references/literature_summary_for_notebooklm.md` |
| 待下载列表 | `analyses/references/papers_to_download.md` |
| Accoti 2023 | `analyses/references/Accoti_2023_Larval_Microbiome_Zika.pdf` |
| Cregger 2018 | `analyses/references/Cregger_2018_Populus_holobiont.pdf` |
| Veach 2019 | `analyses/references/Veach_2019_Rhizosphere_microbiomes.pdf` |

---

## 7. PPT 生成

| 文件 | 完整路径 | 说明 |
|------|----------|------|
| 最新脚本 | `PPT/generate_ppt_v6.py` | v6 版本 |
| 英文 PPT | `PPT/20260126/GroupMeeting_v6.pptx` | 最新组会 |
| 中文 PPT | `PPT/20260126/组会汇报_v6.pptx` | 最新组会 |

历史版本：`PPT/generate_ppt.py` → `v2` → `v3` → `v4` → `v6`

---

## 8. Claude 配置

### 8.1 自定义命令 (.claude/commands/)

| 命令 | 路径 | 用途 |
|------|------|------|
| `/data-check` | `.claude/commands/data-check.md` | 检查数据状态 |
| `/interpret` | `.claude/commands/interpret.md` | 解释分析结果 |
| `/new-analysis` | `.claude/commands/new-analysis.md` | 创建新分析 |
| `/oma-ref` | `.claude/commands/oma-ref.md` | 查询 OMA BOOK |
| `/render` | `.claude/commands/render.md` | 渲染 Quarto |
| `/summarize` | `.claude/commands/summarize.md` | 总结分析 |

### 8.2 NotebookLM

| Notebook | ID | 主题 |
|----------|-----|------|
| OMA & Protocol | `pc047-oma-protocols-reference` | 方法学查询 |
| Literature | `c14f7f4b-2edd-4bce-a287-b3e531b2f855` | 文献查询 |

---

## 9. 常用 R 代码

```r
# ===== 加载核心数据 =====
library(mia)
library(here)

# 物种数据 (核心比较: ApcMUT_HpWT vs ApcMUT_HpKO)
tse_species <- readRDS(here::here("data/01_alpha_beta_diversity_analysis/tse_standard_species_ca_cleaned.rds"))

# 属水平数据
tse_genus <- readRDS(here::here("data/01_alpha_beta_diversity_analysis/tse_standard_genus_ca_cleaned.rds"))

# 功能通路数据
tse_pathway <- readRDS(here::here("data/02_functional_profiling/tse_humann_pathway_ca.rds"))

# KO 数据
tse_ko <- readRDS(here::here("data/02_functional_profiling/tse_humann_ko.rds"))

# 噬菌体数据
tse_phage <- readRDS(here::here("data/03_singlem_diversity_analysis/tse_lyrebird_ca_cleaned.rds"))

# ===== 元数据 =====
metadata <- readxl::read_excel(here::here("data/metadata/pc047-metadata.xlsx"))

# ===== 关键结果表 =====
taxa_ko_assoc <- read.csv(here::here("data/02_functional_profiling/21_taxa_ko_associations.csv"))
driver_species <- read.csv(here::here("data/02_functional_profiling/26_key_ko_driver_species.csv"))
```

---

## 更新日志

| 日期 | 更新内容 |
|------|----------|
| 2026-01-21 | 重构项目目录，完善所有文件路径 |
| 2026-01-21 | 添加 PPT v6，更新 gitignore |
| 2026-01-20 | 添加 02b GO/PFAM 分析、03c 网络分析 |
| 2026-01-19 | 添加扩展分析框架 |
